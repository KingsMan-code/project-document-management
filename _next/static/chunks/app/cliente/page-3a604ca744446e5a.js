(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{976:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,CE:()=>n});var l=s(1990);let r={nome:"",cpf:""},a=(0,l.Z0)({name:"cliente",initialState:r,reducers:{setDadosPF:(e,t)=>{e.nome=t.payload.nome,e.cpf=t.payload.cpf},limparCliente:()=>r}}),{setDadosPF:n,limparCliente:o}=a.actions,i=a.reducer},3853:(e,t,s)=>{Promise.resolve().then(s.bind(s,5800))},4615:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155);function r(){return(0,l.jsx)("header",{className:"bg-primary shadow-lg border-b-4 border-yellow",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("h1",{className:"text-xl font-bold text-white",children:"Alcides e Mosinho"})})})})}},5087:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155);function r(){return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"w-20 h-20 rounded-full animate-spin",style:{boxSizing:"border-box",border:"10px solid rgba(236, 196, 64, 0.2)",borderTopColor:"#ECC440"}})})}},5800:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(5155),r=s(5695),a=s(4615),n=s(6821),o=s(2115),i=s(4540),c=s(976),d=s(7092),x=s(4123),m=s(5087);function u(){let e=(0,r.useRouter)(),t=(0,i.wA)(),[s,u]=(0,o.useState)(2),p="https://api-mosinho-doc-portal.onrender.com";console.log("API URL:",p);let[h,g]=(0,o.useState)(""),[b,f]=(0,o.useState)(""),[j,y]=(0,o.useState)(""),[N,v]=(0,o.useState)([]),[w,C]=(0,o.useState)(!1),[A,D]=(0,o.useState)(null),[F,k]=(0,o.useState)(null),[S,$]=(0,o.useState)(""),[P,E]=(0,o.useState)(!1),[I,B]=(0,o.useState)(!1),[L,_]=(0,o.useState)(!1),O=e=>{let t=e.target.value;y(t.replace(/\D/g,"")),f((0,d.u)(t))},R=()=>(0,d.b)(j),z=e=>{v(t=>t.filter((t,s)=>s!==e))},M=e=>{k(e),$(N[e].nomeAtribuido)},T=()=>{if(null!==F){let e=[...N];e[F].nomeAtribuido=S,v(e),k(null),$("")}},U=async()=>{let e={nome:h,cpf:j,documentos:N.map(e=>({nome:e.nomeAtribuido,file:e.file}))},s=new FormData;for(let t of(s.append("owner",h),e.documentos))s.append("file",t.file,t.nome);C(!0),D(null);try{let e=await fetch("".concat(p,"/upload"),{method:"POST",body:s});if(e.ok){let s=await e.json();console.log(s),t((0,c.CE)({nome:h,cpf:j})),u(4)}else{let t=await e.text();D("Erro ".concat(e.status,": ").concat(t)),u(5)}}catch(e){console.log("error",e),D(e.message||"Erro desconhecido"),e.message&&e.message.includes("Failed to fetch")?u(4):u(5)}finally{C(!1)}},q=async e=>{if(!e.target.files)return;let t=Array.from(e.target.files),s=[],l=!1;for(let e of t){let t=e.type;if(t.startsWith("image/"))try{let l,r=await x.PDFDocument.create(),a=await e.arrayBuffer();if("image/jpeg"===t||"image/jpg"===t)l=await r.embedJpg(a);else{if("image/png"!==t)continue;l=await r.embedPng(a)}r.addPage([l.width,l.height]).drawImage(l,{x:0,y:0,width:l.width,height:l.height});let n=await r.save(),o=new Blob([n],{type:"application/pdf"}),i=new File([o],e.name.replace(/\.[^.]+$/,".pdf"),{type:"application/pdf"});s.push({file:i,nomeAtribuido:i.name})}catch(e){console.error("Erro ao converter imagem em PDF:",e)}else"application/pdf"===t?s.push({file:e,nomeAtribuido:e.name}):l=!0}let r=t[t.length-1],a=(null==r?void 0:r.type)||"";a.startsWith("image/")||"application/pdf"===a?_(!1):l&&_(!0),v(e=>[...e,...s])};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#1A243F]",children:[w&&(0,l.jsx)(m.A,{}),(0,l.jsx)(a.A,{}),(0,l.jsx)("main",{className:"flex-1 px-4 py-8 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white text-[#1A243F] rounded-2xl shadow-lg p-10 max-w-xl w-full relative border-l-8 border-[#ECC440]",children:[2===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Dados Pessoais"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Informe seus dados para prosseguir"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"nome",className:"block text-sm font-bold uppercase text-[#CA9D14] mb-2",children:"Nome Completo"}),(0,l.jsx)("input",{type:"text",id:"nome",placeholder:"Digite seu nome completo ",value:h,onChange:e=>{g(e.target.value),e.target.value.trim().split(" ").length>=2&&E(!0)},onBlur:()=>E(!0),className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440] transition-all"}),P&&h.trim().split(" ").length<2&&(0,l.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Digite seu nome completo"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"cpfCnpj",className:"block text-sm font-bold uppercase text-[#CA9D14] mb-2",children:"CPF"}),(0,l.jsx)("input",{type:"text",id:"cpfCnpj",placeholder:"Digite o CPF",value:b,onChange:e=>{O(e),(0,d.b)(e.target.value.replace(/\D/g,""))&&B(!0)},onBlur:()=>B(!0),maxLength:14,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440] transition-all"}),I&&!R()&&(0,l.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"CPF inv\xe1lido"})]})]}),(0,l.jsx)("div",{className:"flex justify-center mt-6",children:(0,l.jsx)("button",{onClick:()=>u(3),disabled:!(P&&h.trim().split(" ").length>=2&&I&&R()),className:"w-1/2 font-bold py-3 px-6 rounded-lg transition-all ".concat(P&&h.trim().split(" ").length>=2&&I&&R()?"bg-yellow text-[#1A243F] hover:bg-[#D4B91A]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Pr\xf3ximo"})})]}),3===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Documentos"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Envie seus documentos (opcional)"}),L&&(0,l.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,l.jsx)("strong",{className:"font-bold",children:"Aten\xe7\xe3o! "}),(0,l.jsx)("span",{className:"block sm:inline",children:"S\xf3 \xe9 permitido enviar imagens ou arquivos PDF."}),(0,l.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer",onClick:()=>_(!1),children:(0,l.jsxs)("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[(0,l.jsx)("title",{children:"Fechar"}),(0,l.jsx)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("input",{type:"file",accept:"application/pdf,image/*",multiple:!0,onChange:q,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440]"}),N.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold mb-2",children:"Documentos adicionados:"}),N.map((e,t)=>(0,l.jsx)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded mb-2",children:F===t?(0,l.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:S,onChange:e=>$(e.target.value),className:"flex-1 px-2 py-1 border rounded"}),(0,l.jsx)("button",{onClick:T,className:"px-3 py-1 bg-green-500 text-white rounded text-sm",children:"Salvar"}),(0,l.jsx)("button",{onClick:()=>k(null),className:"px-3 py-1 bg-gray-500 text-white rounded text-sm",children:"Cancelar"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"flex-1",children:e.nomeAtribuido}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>M(t),className:"text-blue-600 hover:text-blue-800",children:"✎"}),(0,l.jsx)("a",{href:URL.createObjectURL(e.file),download:e.nomeAtribuido,className:"text-green-600 hover:text-green-800",children:"⬇️"}),(0,l.jsx)("button",{onClick:()=>z(t),className:"text-red-600 hover:text-red-800",children:"\uD83D\uDDD1️"})]})]})},t))]})]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,l.jsx)("button",{onClick:()=>u(2),className:"w-1/2 bg-gray-200 text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Anterior"}),(0,l.jsx)("button",{onClick:U,disabled:0===N.length,className:"w-1/2 font-bold py-3 px-6 rounded-lg transition-all ".concat(0===N.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow text-[#1A243F] hover:bg-[#D4B91A]"),children:"Pr\xf3ximo"})]})]}),4===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Obrigado!"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Seus dados foram registrados com sucesso."}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,l.jsx)("h4",{className:"font-bold mb-2",children:"Resumo dos dados:"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Nome:"})," ",h]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"CPF:"})," ",b]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Documentos:"})," ",N.length," ","arquivo(s)"]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{onClick:()=>e.push("/"),className:"w-1/2 bg-yellow text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Voltar ao In\xedcio"})})]}),5===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6 text-red-600",children:"Servi\xe7o indispon\xedvel"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Contate o escrit\xf3rio informando o erro abaixo."}),A&&(0,l.jsx)("p",{className:"text-center text-red-600 mb-8",children:A}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{onClick:()=>e.push("/"),className:"w-1/2 bg-yellow text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Voltar ao In\xedcio"})})]}),(2===s||3===s)&&(0,l.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-2",children:[(0,l.jsx)("span",{children:"Progresso"}),(0,l.jsx)("span",{children:2===s?"1/2":"2/2"})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(2===s?50:100,"%")}})})]})]})}),(0,l.jsx)(n.A,{})]})}},6821:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155);function r(){return(0,l.jsx)("footer",{className:"bg-primary border-t-4 border-yellow mt-auto",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("p",{className:"text-lightGray text-sm",children:["\xa9 ",new Date().getFullYear()," Alcides e Mosinho. Todos os direitos reservados."]})})})})}},7092:(e,t,s)=>{"use strict";function l(e){let t=e.replace(/\D/g,"");return t.length<=11?t.replace(/^(\d{3})(\d)/,"$1.$2").replace(/^(\d{3})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1-$2").slice(0,14):t.replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d)/,"$1-$2").slice(0,18)}function r(e){let t,s=e.replace(/\D/g,"");if(11!==s.length||/^(\d)\1{10}$/.test(s))return!1;let l=0;for(let e=1;e<=9;e++)l+=parseInt(s.substring(e-1,e))*(11-e);if((10==(t=10*l%11)||11===t)&&(t=0),t!==parseInt(s.substring(9,10)))return!1;l=0;for(let e=1;e<=10;e++)l+=parseInt(s.substring(e-1,e))*(12-e);return(10==(t=10*l%11)||11===t)&&(t=0),t===parseInt(s.substring(10,11))}s.d(t,{b:()=>r,u:()=>l})}},e=>{var t=t=>e(e.s=t);e.O(0,[635,281,441,684,358],()=>t(3853)),_N_E=e.O()}]);