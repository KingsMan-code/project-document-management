(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{976:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,CE:()=>n});var l=s(1990);let r={nome:"",cpf:""},a=(0,l.Z0)({name:"cliente",initialState:r,reducers:{setDadosPF:(e,t)=>{e.nome=t.payload.nome,e.cpf=t.payload.cpf},limparCliente:()=>r}}),{setDadosPF:n,limparCliente:o}=a.actions,i=a.reducer},4615:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(5155),r=s(5695);function a(){let e=(0,r.useRouter)();return(0,l.jsx)("header",{className:"bg-primary shadow-lg border-b-4 border-yellow",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,l.jsx)("div",{className:"flex items-center justify-center cursor-pointer",onClick:()=>{e.push("/")},children:(0,l.jsx)("h1",{className:"text-xl font-bold text-white",children:"Alcides e Mosinho"})})})})}},5087:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155);function r(){return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsx)("div",{className:"w-20 h-20 rounded-full animate-spin",style:{boxSizing:"border-box",border:"10px solid rgba(236, 196, 64, 0.2)",borderTopColor:"#ECC440"}})})}},5913:(e,t,s)=>{Promise.resolve().then(s.bind(s,7484))},6821:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155);function r(){return(0,l.jsx)("footer",{className:"bg-primary border-t-4 border-yellow mt-auto",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("p",{className:"text-lightGray text-sm",children:["\xa9 ",new Date().getFullYear()," Alcides e Mosinho. Todos os direitos reservados."]})})})})}},7092:(e,t,s)=>{"use strict";function l(e){let t=e.replace(/\D/g,"");return t.length<=11?t.replace(/^(\d{3})(\d)/,"$1.$2").replace(/^(\d{3})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1-$2").slice(0,14):t.replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d)/,"$1-$2").slice(0,18)}function r(e){let t,s=e.replace(/\D/g,"");if(11!==s.length||/^(\d)\1{10}$/.test(s))return!1;let l=0;for(let e=1;e<=9;e++)l+=parseInt(s.substring(e-1,e))*(11-e);if((10==(t=10*l%11)||11===t)&&(t=0),t!==parseInt(s.substring(9,10)))return!1;l=0;for(let e=1;e<=10;e++)l+=parseInt(s.substring(e-1,e))*(12-e);return(10==(t=10*l%11)||11===t)&&(t=0),t===parseInt(s.substring(10,11))}s.d(t,{b:()=>r,u:()=>l})},7484:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var l=s(5155),r=s(2115),a=s(4123),n=s(5695),o=s(4615),i=s(6821),d=s(7092),c=s(4540),x=s(976),u=s(5087);function m(){let e=(0,n.useRouter)(),t=(0,c.wA)(),[s,m]=(0,r.useState)(1),[h,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[y,v]=(0,r.useState)([]),[N,w]=(0,r.useState)([]),[C,A]=(0,r.useState)([]),[D,F]=(0,r.useState)(null),[k,P]=(0,r.useState)(""),[S,$]=(0,r.useState)(""),[E,B]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),[T,_]=(0,r.useState)(!1),[q,z]=(0,r.useState)(!1),[L,O]=(0,r.useState)(null),M=e=>{let t=e.target.value;j(t.replace(/\D/g,"")),b((0,d.u)(t))},G=()=>(0,d.b)(f),U=async e=>{try{let t,s=await a.PDFDocument.create(),l=await e.arrayBuffer();if("image/jpeg"===e.type||"image/jpg"===e.type)t=await s.embedJpg(l);else{if("image/png"!==e.type)return null;t=await s.embedPng(l)}s.addPage([t.width,t.height]).drawImage(t,{x:0,y:0,width:t.width,height:t.height});let r=await s.save(),n=new Blob([r],{type:"application/pdf"});return new File([n],e.name.replace(/\.[^.]+$/,".pdf"),{type:"application/pdf"})}catch(e){return console.error("Erro ao converter imagem em PDF:",e),null}},V=async(e,t,s)=>{if(!e.target.files)return;let l=Array.from(e.target.files),r=[],a=!1;for(let e of l){let t=e.type;if(t.startsWith("image/")){let t=await U(e);t&&r.push({file:t,nomeAtribuido:t.name})}else"application/pdf"===t?r.push({file:e,nomeAtribuido:e.name}):a=!0}let n=l[l.length-1],o=(null==n?void 0:n.type)||"";o.startsWith("image/")||"application/pdf"===o?_(!1):a&&_(!0),t(e=>[...e,...r])},W=(e,t)=>{t(t=>t.filter((t,s)=>s!==e))},H=(e,t,s)=>{F(e),P(t),$(s)},J=()=>{null!==D&&S&&(("identidade"===S?v:"residencia"===S?w:A)(e=>{let t=[...e];return t[D].nomeAtribuido=k,t}),F(null),P(""),$(""))},Y=(e,t,s,r)=>(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-center text-[#CA9D14]",children:e}),T&&(0,l.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,l.jsx)("strong",{className:"font-bold",children:"Aten\xe7\xe3o! "}),(0,l.jsx)("span",{className:"block sm:inline",children:"S\xf3 \xe9 permitido enviar imagens ou arquivos PDF."}),(0,l.jsx)("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer",onClick:()=>_(!1),children:(0,l.jsxs)("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[(0,l.jsx)("title",{children:"Fechar"}),(0,l.jsx)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})]}),(0,l.jsx)("input",{type:"file",accept:"application/pdf,image/*",multiple:!0,onChange:e=>V(e,s,r),className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440] transition-all"}),t.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold mb-2",children:"Documentos adicionados:"}),t.map((e,t)=>(0,l.jsx)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded mb-2",children:D===t&&S===r?(0,l.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:k,onChange:e=>P(e.target.value),className:"flex-1 px-2 py-1 border rounded"}),(0,l.jsx)("button",{onClick:J,className:"px-3 py-1 bg-green-500 text-white rounded text-sm",children:"Salvar"}),(0,l.jsx)("button",{onClick:()=>{F(null),$("")},className:"px-3 py-1 bg-gray-500 text-white rounded text-sm",children:"Cancelar"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"flex-1",children:e.nomeAtribuido}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>H(t,e.nomeAtribuido,r),className:"text-blue-600 hover:text-blue-800",children:"✎"}),(0,l.jsx)("a",{href:URL.createObjectURL(e.file),download:e.nomeAtribuido,className:"text-green-600 hover:text-green-800",children:"⬇️"}),(0,l.jsx)("button",{onClick:()=>W(t,s),className:"text-red-600 hover:text-red-800",children:"\uD83D\uDDD1️"})]})]})},t))]})]}),Z=async()=>{let e=new FormData;e.append("owner",h),[...y,...N,...C].forEach(t=>{e.append("file",t.file,t.nomeAtribuido)}),z(!0),O(null);try{let s=await fetch("".concat("https://api-mosinho-doc-portal.onrender.com","/upload"),{method:"POST",body:e});if(s.ok){let e=await s.json();console.log(e),t((0,x.CE)({nome:h,cpf:f})),m(5)}else setTimeout(()=>{m(5)},5e3)}catch(e){console.log("error",e),setTimeout(()=>{m(5)},5e3)}finally{z(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#1A243F]",children:[q&&(0,l.jsx)(u.A,{}),(0,l.jsx)(o.A,{}),(0,l.jsx)("main",{className:"flex-1 px-4 py-8 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white text-[#1A243F] rounded-2xl shadow-lg p-10 max-w-xl w-full relative border-l-8 border-[#ECC440]",children:[1===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Dados Pessoais"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Informe seus dados para prosseguir"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"nome",className:"block text-sm font-bold uppercase text-[#CA9D14] mb-2",children:"Nome Completo"}),(0,l.jsx)("input",{type:"text",id:"nome",placeholder:"Digite seu nome completo",value:h,onChange:e=>{p(e.target.value),e.target.value.trim().split(" ").length>=2&&B(!0)},onBlur:()=>B(!0),className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440] transition-all"}),E&&h.trim().split(" ").length<2&&(0,l.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"Digite seu nome completo"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"cpf",className:"block text-sm font-bold uppercase text-[#CA9D14] mb-2",children:"CPF"}),(0,l.jsx)("input",{type:"text",id:"cpf",placeholder:"Digite o CPF",value:g,onChange:e=>{M(e),(0,d.b)(e.target.value.replace(/\D/g,""))&&R(!0)},onBlur:()=>R(!0),maxLength:14,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ECC440] transition-all"}),I&&!G()&&(0,l.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"CPF inv\xe1lido"})]})]}),(0,l.jsx)("div",{className:"flex justify-center mt-6",children:(0,l.jsx)("button",{onClick:()=>m(2),disabled:!(E&&h.trim().split(" ").length>=2&&I&&G()),className:"w-1/2 font-bold py-3 px-6 rounded-lg transition-all ".concat(E&&h.trim().split(" ").length>=2&&I&&G()?"bg-yellow text-[#1A243F] hover:bg-[#D4B91A]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Pr\xf3ximo"})})]}),2===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Documentos de Identidade"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Envie seus documentos de identidade"}),Y("RG, CNH ou Passaporte",y,v,"identidade"),(0,l.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,l.jsx)("button",{onClick:()=>m(1),className:"w-1/2 bg-gray-200 text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Anterior"}),(0,l.jsx)("button",{onClick:()=>m(3),disabled:0===y.length,className:"w-1/2 font-bold py-3 px-6 rounded-lg transition-all ".concat(0===y.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow text-[#1A243F] hover:bg-[#D4B91A]"),children:"Pr\xf3ximo"})]})]}),3===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Comprovante de Resid\xeancia"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Envie seu comprovante de resid\xeancia"}),Y("Conta de luz, \xe1gua, telefone ou extrato banc\xe1rio",N,w,"residencia"),(0,l.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,l.jsx)("button",{onClick:()=>m(2),className:"w-1/2 bg-gray-200 text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Anterior"}),(0,l.jsx)("button",{onClick:()=>m(4),disabled:0===N.length,className:"w-1/2 font-bold py-3 px-6 rounded-lg transition-all ".concat(0===N.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow text-[#1A243F] hover:bg-[#D4B91A]"),children:"Pr\xf3ximo"})]})]}),4===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Procura\xe7\xe3o"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Envie sua procura\xe7\xe3o (opcional)"}),Y("Procura\xe7\xe3o p\xfablica ou particular",C,A,"procuracao"),(0,l.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,l.jsx)("button",{onClick:()=>m(3),className:"w-1/2 bg-gray-200 text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-all",children:"Anterior"}),(0,l.jsx)("button",{onClick:Z,className:"w-1/2 bg-yellow text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-[#D4B91A] transition-all",children:"Finalizar"})]})]}),5===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Obrigado!"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Seus dados foram registrados com sucesso."}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,l.jsx)("h4",{className:"font-bold mb-2",children:"Resumo dos dados:"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Nome:"})," ",h]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"CPF:"})," ",g]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Documentos de Identidade:"})," ",y.length," arquivo(s)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Documentos de Resid\xeancia:"})," ",N.length," arquivo(s)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Procura\xe7\xf5es:"})," ",C.length," arquivo(s)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Total de documentos:"})," ",y.length+N.length+C.length," arquivo(s)"]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{onClick:()=>e.push("/"),className:"w-1/2 bg-yellow text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-[#D4B91A] transition-all",children:"Voltar ao In\xedcio"})})]}),6===s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-6 text-red-600",children:"Servi\xe7o indispon\xedvel"}),(0,l.jsx)("p",{className:"text-center text-[#CA9D14] mb-8",children:"Contate o escrit\xf3rio informando o erro abaixo."}),L&&(0,l.jsx)("p",{className:"text-center text-red-600 mb-8",children:L}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{onClick:()=>e.push("/"),className:"w-1/2 bg-yellow text-[#1A243F] font-bold py-3 px-6 rounded-lg hover:bg-[#D4B91A] transition-all",children:"Voltar ao In\xedcio"})})]}),s>=1&&s<=4&&(0,l.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-2",children:[(0,l.jsx)("span",{children:"Progresso"}),(0,l.jsxs)("span",{children:[s,"/4"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s/4*100,"%")}})})]})]})}),(0,l.jsx)(i.A,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[635,281,441,684,358],()=>t(5913)),_N_E=e.O()}]);